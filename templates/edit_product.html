{% extends 'base.html' %}

{% block content %}
<h2 class="text-center">Modifica Prodotto</h2>
<div class="container mt-4">
    <form action="{{ url_for('edit_product', product_id=product['_id']) }}" method="POST" enctype="multipart/form-data">
        <!-- Campo Nome -->
        <div class="form-group">
            <label for="name">Nome Prodotto</label>
            <input type="text" id="name" name="name" class="form-control" value="{{ product['name'] }}" required>
        </div>
        <!-- Campo Descrizione -->
        <div class="form-group">
            <label for="description">Descrizione</label>
            <textarea id="description" name="description" class="form-control" rows="4" required>{{ product['description'] }}</textarea>
        </div>
        <!-- Campo Category -->
        <div class="form-group">
            <label for="category">Descrizione</label>
            <textarea id="category" name="category" class="form-control" rows="1" required>{{ product['category'] }}</textarea>
        </div>

        <!-- Immagini già caricate -->
        <div class="form-group">
            <label>Immagini</label>
            <div class="row">
                {% for i in images %}
                <div class="col-md-4 text-center mb-3">
                    <img src="data:image/png;base64,{{ i[1] }}" class="img-thumbnail" alt="Immagine {{ i[0] + 1 }}">
                    <div>
                        <label class="form-check-label">
                            <input type="checkbox" name="remove_images" value="{{ i[0] }}" class="form-check-input"> Rimuovi
                        </label>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Campo Immagine -->
        <div class="form-group">
            <label for="images">Nuove Immagini (opzionale, puoi selezionare più file)</label>
            <input type="file" id="images" name="images" class="form-control-file" accept="image/*" multiple>
        </div>
        
        <!-- Pulsante di Invio -->
        <button type="submit" class="btn btn-success mt-3">Salva Modifiche</button>
    </form>
</div>
{% endblock %}

